<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>회원가입</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTB-m0-ZCanKi1R6CYmoqR4Xx29RRq2IE"></script>
	<script src="/js/location.js"></script>
</head>

<body>
<div class="container mt-3">
	<div class="row mt-5">
		<div class="col-12 text-center"><h1>회원가입</h1></div>
	</div>
	<div class="row mt-5">
		<div class="col-12 text-danger" th:text="${error}"></div>
	</div>

	<div class="row">
		<form method="POST" th:action="@{/user/register}">
			<div class="form-group mt-3">
				<label for="username">아이디</label>
				<input type="text" class="form-control" id="username" name="username" th:value="${username}">
			</div>
			<div class="form-group mt-3">
				<label for="name">이름(닉네임)</label>
				<input type="text" class="form-control" id="name" name="name" th:value="${name}">
			</div>
			<div class="form-group mt-3">
				<label for="password">비밀번호</label>
				<input type="password" class="form-control" id="password" name="password">
			</div>
			<div class="form-group mt-3">
				<label for="re-password">비밀번호 확인</label>
				<input type="password" class="form-control" id="re-password" name="re_password">
			</div>
			<div class="form-group mt-3">
				<label for="juminNo">주민등록번호</label>
				<input type="text" inputmode="numeric" maxlength="13" class="form-control" id="juminNo" name="juminNo">
			</div>

			<div class="form-group mt-3">
				<label>활동 지역 <span id="area-name-label">(현재 위치 기반)</span></label><br>
				<button type="button" class="btn btn-outline-primary" onclick="openMap('map', 'mapModal', 'modal-area-name')">위치 선택</button>
				<input type="hidden" id="latitude" name="latitude">
				<input type="hidden" id="longitude" name="longitude">
				<input type="hidden" id="areaName" name="areaName">
			</div>

			<div class="form-group mt-3">
				<label>태그 선택</label>
				<input type="text" class="form-control" name="tagInput" placeholder="예: #음악 #여행">
			</div>

			<button type="submit" class="w-100 btn btn-lg btn-primary mt-3">회원가입 완료</button>
		</form>
	</div>
</div>

<!-- 지도 모달 -->
<div class="modal fade" id="mapModal" tabindex="-1">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">내 위치 확인</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
			</div>
			<div class="modal-body">
				<div id="map" style="width: 100%; height: 400px;"></div>
				<p class="mt-2">활동 지역: <span id="modal-area-name">지역 불러오는 중...</span></p>
			</div>
		</div>
	</div>
</div>
</body>
</html>
